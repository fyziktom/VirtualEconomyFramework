@inject AppData AppData
@inherits NFTDetailPage

@page "/music"

<PageTitle>The - Music</PageTitle>

<Container Fluid>
    <Row Margin="Margin.Is3.FromTop">
        <Column ColumnSize="ColumnSize.Is12.OnMobile.Is12.OnTablet.Is8.OnDesktop">
            <MusicDetails @ref="@musicDetails" />
        </Column>
        <Column ColumnSize="ColumnSize.IsAuto.OnMobile.IsAuto.OnTablet.Is4.OnDesktop">
           <MusicSlideList />
        </Column>
    </Row>
    <Row Margin="Margin.Is5.FromTop.Is2.FromBottom">
        <Column>
        </Column>
    </Row>
</Container>

@code {
    MusicDetails? musicDetails;

    protected override async Task OnAfterRenderAsync( bool firstRender )
    {
        if ( musicDetails == null )
            return;

        if ( !string.IsNullOrEmpty(Utxo) && Utxo.Length > 0 )
        {
            var post = await SearchOrLoad();

            if (post != null)
                await musicDetails.Load( post );
        }

        if (firstRender)
            await FirstLoad();
    }
}


