@using VEDriversLite
@using VEDriversLite.NFT
@inject AppData AppData
@inherits NFTComponentBase

@if ( NFT != null )
{
    <Modal @ref="NFTDetailsModal">
        <ModalContent Centered Size="ModalSize.Large">
            <ModalHeader>
                <ModalTitle>@NFT.Name - Details</ModalTitle>
                <CloseButton />
            </ModalHeader>
            <ModalBody>
                <Row>
                    <Column>
                        <NFTBasicInfo NFT="@NFT" />
                    </Column>
                    
                    <Column>
                        <Card Margin="Margin.Is4.FromBottom">
                            <CardBody>
                                <CardTitle Size="5">@SpecificInfoHeading</CardTitle>
                                @ChildContent
                            </CardBody>
                        </Card>

                        <NFTText Text="@NFT.Text" />
                        
                        <NFTActionControl Address="@Address" 
                                          IsSubAccount="@IsSubAccount" 
                                          HideOpenInWorkTabButton="@HideOpenInWorkTabButton"
                                          IsOwnNFT="@IsOwnNFT" 
                                          OpenNFTsInWorkTab="@OpenNFTInWorkTabHandler"
                                          NFT="@NFT" 
                                          NFTSent="@NFTSentHandler"  />
                        
                        <StorageInfoActions IPFSLink="@NFT.ImageLink" Utxo="@NFT.Utxo" UtxoIndex="@NFT.UtxoIndex" />
                        
                    </Column>
                </Row>
            </ModalBody>
        </ModalContent>
    </Modal>
}

@code {
    private Modal? NFTDetailsModal;
    
    [Parameter]
    public string SpecificInfoHeading { get; set; } = "Specific Info";
    
    public bool ShowNFTDetails()
    {
        if ( NFT == null )
            return false;

        NFTDetailsModal?.Show();
        return true;
    }
    public bool HideNFTDetails()
    {
        NFTDetailsModal?.Hide();
        return true;
    }

}
